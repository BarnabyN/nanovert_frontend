{"ast":null,"code":"import _slicedToArray from \"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/barnabynapier/Documents/nanovert/frontend/src/pages/VendorHomePage.js\";\nimport React from \"react\";\nimport { useHistory, Link } from \"react-router-dom\"; // import getFollowers from \"../functions/instagramInfo\"\n\nfunction getFollowers(username) {\n  fetch(`https://www.instagram.com/${username}/?__a=1`).then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    return json[\"graphql\"][\"user\"][\"edge_followed_by\"][\"count\"];\n  });\n}\n\n;\n\nfunction VendorHomePage() {\n  const token = localStorage.getItem(\"token\");\n  const history = useHistory();\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        currentVendor = _React$useState2[0],\n        setCurrentVendor = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        users = _React$useState4[0],\n        setUsers = _React$useState4[1];\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:5000/vendor-home\").then(res => res.json()).then(u => {\n      setUsers(u);\n    });\n  }, []);\n  React.useEffect(() => {\n    if (token) {\n      fetch(\"http://localhost:5000/get-current-vendor\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(u => {\n        setCurrentVendor(u['username']);\n      });\n    }\n  }, [token]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"NANOVERT\")), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Current user: \", currentVendor), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: () => {\n      localStorage.removeItem(\"token\");\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Log out.\")), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Users\"), users.map(u => {\n    const followers = getFollowers(u.username);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      style: {\n        borderBottom: \"1px solid lightgrey\",\n        width: \"80%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, u.username), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, u.email), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, followers))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }));\n  }));\n}\n\nexport default VendorHomePage;","map":{"version":3,"sources":["/Users/barnabynapier/Documents/nanovert/frontend/src/pages/VendorHomePage.js"],"names":["React","useHistory","Link","getFollowers","username","fetch","then","res","json","VendorHomePage","token","localStorage","getItem","history","useState","currentVendor","setCurrentVendor","users","setUsers","useEffect","u","headers","removeItem","push","map","followers","borderBottom","width","email"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\n// import getFollowers from \"../functions/instagramInfo\"\n\nfunction getFollowers(username){\n    fetch(`https://www.instagram.com/${username}/?__a=1`)\n        .then(function(res) {\n            return res.json();\n        })\n        .then(function(json) {\n            return json[\"graphql\"][\"user\"][\"edge_followed_by\"][\"count\"];\n        });\n   };\n\nfunction VendorHomePage() {\n    const token = localStorage.getItem(\"token\");\n    const history = useHistory();\n    const [currentVendor, setCurrentVendor] = React.useState(null);\n    const [users, setUsers] = React.useState([])\n\n    React.useEffect(() => {\n        fetch(\"http://localhost:5000/vendor-home\")\n            .then(res => res.json())\n            .then(u => { setUsers(u)});\n    }, []);\n\n    React.useEffect(() => {\n        if (token) {\n            fetch(\"http://localhost:5000/get-current-vendor\", {\n                headers: {\"Authorization\": `Bearer ${token}`}\n            })\n            .then(res => res.json())\n            .then(u => { setCurrentVendor(u['username']) });\n        }\n    }, [token]);\n\n    return (\n        <div>\n            <h2><Link to={`/`}>NANOVERT</Link></h2>  \n            <p>Current user: {currentVendor}</p>\n            <p>\n                <button onClick={() => {\n                    localStorage.removeItem(\"token\");\n                    history.push(\"/\");\n                    }}>\n                    Log out.\n                </button>\n            </p>\n            <h3>Users</h3>\n            {users.map(u => {\n                const followers = getFollowers(u.username)\n                return (\n                    <div>\n                        <table style={{ borderBottom: \"1px solid lightgrey\", width: \"80%\"}}>\n                            <tr>\n                                <td>{ u.username }</td>\n                                <td>{ u.email }</td>\n                                <td>{ followers }</td>\n                            </tr>\n                        </table>\n                        < br/>\n                    </div>\n                );\n            })}\n        </div>\n    );\n}\n\nexport default VendorHomePage;\n"]},"metadata":{},"sourceType":"module"}