{"ast":null,"code":"import _objectSpread from \"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/barnabynapier/Documents/nanovert/frontend/src/pages/VendorHomePage.js\";\nimport React from \"react\";\nimport MaterialTable from 'material-table';\nimport { useHistory, Link } from \"react-router-dom\";\n\nfunction createJson(username, firstname, lastname, email) {\n  return {\n    \"username\": username,\n    \"firstname\": firstname,\n    \"lastname\": lastname,\n    \"email\": email\n  };\n}\n\nfunction VendorHomePage() {\n  const token = localStorage.getItem(\"token\");\n  const history = useHistory();\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        currentVendor = _React$useState2[0],\n        setCurrentVendor = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        users = _React$useState4[0],\n        setUsers = _React$useState4[1];\n\n  const _React$useState5 = React.useState({\n    columns: [{\n      title: 'Username',\n      field: 'username'\n    }, {\n      title: 'First Name',\n      field: 'firstname'\n    }, {\n      title: 'Last Name',\n      field: 'lastname'\n    }, {\n      title: 'Email',\n      field: 'email'\n    }],\n    data: users\n  }),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        state = _React$useState6[0],\n        setState = _React$useState6[1];\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:5000/vendor-home\").then(res => res.json()).then(u => {\n      setUsers(u);\n    });\n  }, []);\n  React.useEffect(() => {\n    if (token) {\n      fetch(\"http://localhost:5000/get-current-vendor\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(u => {\n        setCurrentVendor(u['username']);\n      });\n    }\n  }, [token]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"NANOVERT\")), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Current user: \", currentVendor), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: () => {\n      localStorage.removeItem(\"token\");\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Log out.\")), React.createElement(MaterialTable, {\n    title: \"Verified Users\",\n    columns: state.columns,\n    data: users.map(u => createJson(u.username, u.firstname, u.lastname, u.email)),\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          setState(prevState => {\n            const data = [...prevState.data];\n            data.push(newData);\n            return _objectSpread({}, prevState, {\n              data\n            });\n          });\n        }, 600);\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n\n          if (oldData) {\n            setState(prevState => {\n              const data = [...prevState.data];\n              data[data.indexOf(oldData)] = newData;\n              return _objectSpread({}, prevState, {\n                data\n              });\n            });\n          }\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          setState(prevState => {\n            const data = [...prevState.data];\n            data.splice(data.indexOf(oldData), 1);\n            return _objectSpread({}, prevState, {\n              data\n            });\n          });\n        }, 600);\n      })\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }));\n}\n\nexport default VendorHomePage;","map":{"version":3,"sources":["/Users/barnabynapier/Documents/nanovert/frontend/src/pages/VendorHomePage.js"],"names":["React","MaterialTable","useHistory","Link","createJson","username","firstname","lastname","email","VendorHomePage","token","localStorage","getItem","history","useState","currentVendor","setCurrentVendor","users","setUsers","columns","title","field","data","state","setState","useEffect","fetch","then","res","json","u","headers","removeItem","push","map","onRowAdd","newData","Promise","resolve","setTimeout","prevState","onRowUpdate","oldData","indexOf","onRowDelete","splice"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;;AAEA,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,SAA9B,EAAyCC,QAAzC,EAAmDC,KAAnD,EAA0D;AACtD,SAAO;AACH,gBAAWH,QADR;AAEH,iBAAYC,SAFT;AAGH,gBAAWC,QAHR;AAIH,aAAQC;AAJL,GAAP;AAOH;;AAED,SAASC,cAAT,GAA0B;AACtB,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,OAAO,GAAGX,UAAU,EAA1B;;AAFsB,0BAGoBF,KAAK,CAACc,QAAN,CAAe,IAAf,CAHpB;AAAA;AAAA,QAGfC,aAHe;AAAA,QAGAC,gBAHA;;AAAA,2BAIIhB,KAAK,CAACc,QAAN,CAAe,EAAf,CAJJ;AAAA;AAAA,QAIfG,KAJe;AAAA,QAIRC,QAJQ;;AAAA,2BAKIlB,KAAK,CAACc,QAAN,CAAe;AACrCK,IAAAA,OAAO,EAAE,CACL;AAAEC,MAAAA,KAAK,EAAE,UAAT;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KADK,EAEL;AAAED,MAAAA,KAAK,EAAE,YAAT;AAAuBC,MAAAA,KAAK,EAAE;AAA9B,KAFK,EAGL;AAAED,MAAAA,KAAK,EAAE,WAAT;AAAsBC,MAAAA,KAAK,EAAE;AAA7B,KAHK,EAIL;AAAED,MAAAA,KAAK,EAAE,OAAT;AAAkBC,MAAAA,KAAK,EAAE;AAAzB,KAJK,CAD4B;AAOrCC,IAAAA,IAAI,EAAEL;AAP+B,GAAf,CALJ;AAAA;AAAA,QAKfM,KALe;AAAA,QAKRC,QALQ;;AAetBxB,EAAAA,KAAK,CAACyB,SAAN,CAAgB,MAAM;AAClBC,IAAAA,KAAK,CAAC,mCAAD,CAAL,CACKC,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUG,CAAC,IAAI;AAAEZ,MAAAA,QAAQ,CAACY,CAAD,CAAR;AAAY,KAF7B;AAGH,GAJD,EAIG,EAJH;AAMA9B,EAAAA,KAAK,CAACyB,SAAN,CAAgB,MAAM;AAClB,QAAIf,KAAJ,EAAW;AACPgB,MAAAA,KAAK,CAAC,0CAAD,EAA6C;AAC9CK,QAAAA,OAAO,EAAE;AAAC,2BAAkB,UAASrB,KAAM;AAAlC;AADqC,OAA7C,CAAL,CAGCiB,IAHD,CAGMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAHb,EAICF,IAJD,CAIMG,CAAC,IAAI;AAAEd,QAAAA,gBAAgB,CAACc,CAAC,CAAC,UAAD,CAAF,CAAhB;AAAiC,OAJ9C;AAKH;AACJ,GARD,EAQG,CAACpB,KAAD,CARH;AAUA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAG,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAkBK,aAAlB,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,OAAO,EAAE,MAAM;AACnBJ,MAAAA,YAAY,CAACqB,UAAb,CAAwB,OAAxB;AACAnB,MAAAA,OAAO,CAACoB,IAAR,CAAa,GAAb;AACC,KAHL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAHJ,EAYI,oBAAC,aAAD;AACI,IAAA,KAAK,EAAC,gBADV;AAEI,IAAA,OAAO,EAAEV,KAAK,CAACJ,OAFnB;AAGI,IAAA,IAAI,EAAEF,KAAK,CAACiB,GAAN,CAAUJ,CAAC,IAAI1B,UAAU,CAAC0B,CAAC,CAACzB,QAAH,EAAayB,CAAC,CAACxB,SAAf,EAA0BwB,CAAC,CAACvB,QAA5B,EAAsCuB,CAAC,CAACtB,KAAxC,CAAzB,CAHV;AAII,IAAA,QAAQ,EAAE;AACN2B,MAAAA,QAAQ,EAAEC,OAAO,IACjB,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AACnBC,QAAAA,UAAU,CAAC,MAAM;AACjBD,UAAAA,OAAO;AACPd,UAAAA,QAAQ,CAACgB,SAAS,IAAI;AAClB,kBAAMlB,IAAI,GAAG,CAAC,GAAGkB,SAAS,CAAClB,IAAd,CAAb;AACAA,YAAAA,IAAI,CAACW,IAAL,CAAUG,OAAV;AACA,qCAAYI,SAAZ;AAAuBlB,cAAAA;AAAvB;AACH,WAJO,CAAR;AAKC,SAPS,EAOP,GAPO,CAAV;AAQH,OATD,CAFM;AAYNmB,MAAAA,WAAW,EAAE,CAACL,OAAD,EAAUM,OAAV,KACb,IAAIL,OAAJ,CAAYC,OAAO,IAAI;AACnBC,QAAAA,UAAU,CAAC,MAAM;AACjBD,UAAAA,OAAO;;AACP,cAAII,OAAJ,EAAa;AACTlB,YAAAA,QAAQ,CAACgB,SAAS,IAAI;AACtB,oBAAMlB,IAAI,GAAG,CAAC,GAAGkB,SAAS,CAAClB,IAAd,CAAb;AACAA,cAAAA,IAAI,CAACA,IAAI,CAACqB,OAAL,CAAaD,OAAb,CAAD,CAAJ,GAA8BN,OAA9B;AACA,uCAAYI,SAAZ;AAAuBlB,gBAAAA;AAAvB;AACC,aAJO,CAAR;AAKH;AACA,SATS,EASP,GATO,CAAV;AAUH,OAXD,CAbM;AAyBNsB,MAAAA,WAAW,EAAEF,OAAO,IACpB,IAAIL,OAAJ,CAAYC,OAAO,IAAI;AACnBC,QAAAA,UAAU,CAAC,MAAM;AACjBD,UAAAA,OAAO;AACPd,UAAAA,QAAQ,CAACgB,SAAS,IAAI;AAClB,kBAAMlB,IAAI,GAAG,CAAC,GAAGkB,SAAS,CAAClB,IAAd,CAAb;AACAA,YAAAA,IAAI,CAACuB,MAAL,CAAYvB,IAAI,CAACqB,OAAL,CAAaD,OAAb,CAAZ,EAAmC,CAAnC;AACA,qCAAYF,SAAZ;AAAuBlB,cAAAA;AAAvB;AACH,WAJO,CAAR;AAKC,SAPS,EAOP,GAPO,CAAV;AAQH,OATD;AA1BM,KAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,CADJ;AA0DH;;AAED,eAAeb,cAAf","sourcesContent":["import React from \"react\";\nimport MaterialTable from 'material-table';\nimport { useHistory, Link } from \"react-router-dom\";\n\nfunction createJson(username, firstname, lastname, email) {\n    return {\n        \"username\":username,\n        \"firstname\":firstname,\n        \"lastname\":lastname,\n        \"email\":email,\n\n    }\n}\n\nfunction VendorHomePage() {\n    const token = localStorage.getItem(\"token\");\n    const history = useHistory();\n    const [currentVendor, setCurrentVendor] = React.useState(null);\n    const [users, setUsers] = React.useState([])\n    const [state, setState] = React.useState({\n        columns: [\n            { title: 'Username', field: 'username' },\n            { title: 'First Name', field: 'firstname' },\n            { title: 'Last Name', field: 'lastname' },\n            { title: 'Email', field: 'email' },\n        ],\n        data: users\n    });\n\n    React.useEffect(() => {\n        fetch(\"http://localhost:5000/vendor-home\")\n            .then(res => res.json())\n            .then(u => { setUsers(u)});\n    }, []);\n\n    React.useEffect(() => {\n        if (token) {\n            fetch(\"http://localhost:5000/get-current-vendor\", {\n                headers: {\"Authorization\": `Bearer ${token}`}\n            })\n            .then(res => res.json())\n            .then(u => { setCurrentVendor(u['username']) });\n        }\n    }, [token]);\n\n    return (\n        <div>\n            <h2><Link to={`/`}>NANOVERT</Link></h2>  \n            <p>Current user: {currentVendor}</p>\n            <p>\n                <button onClick={() => {\n                    localStorage.removeItem(\"token\");\n                    history.push(\"/\");\n                    }}>\n                    Log out.\n                </button>\n            </p>\n\n            <MaterialTable\n                title=\"Verified Users\"\n                columns={state.columns}\n                data={users.map(u => createJson(u.username, u.firstname, u.lastname, u.email))}\n                editable={{\n                    onRowAdd: newData =>\n                    new Promise(resolve => {\n                        setTimeout(() => {\n                        resolve();\n                        setState(prevState => {\n                            const data = [...prevState.data];\n                            data.push(newData);\n                            return { ...prevState, data };\n                        });\n                        }, 600);\n                    }),\n                    onRowUpdate: (newData, oldData) =>\n                    new Promise(resolve => {\n                        setTimeout(() => {\n                        resolve();\n                        if (oldData) {\n                            setState(prevState => {\n                            const data = [...prevState.data];\n                            data[data.indexOf(oldData)] = newData;\n                            return { ...prevState, data };\n                            });\n                        }\n                        }, 600);\n                    }),\n                    onRowDelete: oldData =>\n                    new Promise(resolve => {\n                        setTimeout(() => {\n                        resolve();\n                        setState(prevState => {\n                            const data = [...prevState.data];\n                            data.splice(data.indexOf(oldData), 1);\n                            return { ...prevState, data };\n                        });\n                        }, 600);\n                    }),\n                }}\n                />\n\n        </div>\n    );\n}\n\nexport default VendorHomePage;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}