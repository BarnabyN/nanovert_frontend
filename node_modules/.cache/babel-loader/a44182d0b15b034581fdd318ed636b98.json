{"ast":null,"code":"import _slicedToArray from \"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/barnabynapier/Documents/nanovert/frontend/src/pages/HomePage.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction HomePage() {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        offers = _React$useState2[0],\n        setOffers = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        loading = _React$useState4[0],\n        setLoading = _React$useState4[1];\n\n  const _React$useState5 = React.useState(null),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        currentUser = _React$useState6[0],\n        setCurrentUser = _React$useState6[1];\n\n  const token = localStorage.getItem(\"token\");\n  React.useEffect(() => {\n    if (token) {\n      fetch(\"http://localhost:5000/get-current-user\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(u => {\n        setCurrentUser(u);\n      });\n    }\n  }, [token]);\n  React.useEffect(() => {\n    setLoading(true);\n    fetch(\"http://localhost:5000/\").then(res => res.json()).then(p => {\n      setOffers(p);\n      setLoading(false);\n    });\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"NANOVERT\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Token: \", token), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Current user: \", JSON.stringify(currentUser['username'])), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/login`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"Login\")), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/signup`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Sign Up\")), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: () => localStorage.removeItem(\"token\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Log out.\")), loading && \"loading....\", offers.map(o => {\n    return React.createElement(\"div\", {\n      style: {\n        borderBottom: \"1px solid lightgrey\",\n        padding: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `/offer/${o.id}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, o.title), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, o.vendor), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Discount: \", o.discount, \"%\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Remaining: \", o.numavailable)));\n  }));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/barnabynapier/Documents/nanovert/frontend/src/pages/HomePage.js"],"names":["React","Link","HomePage","useState","offers","setOffers","loading","setLoading","currentUser","setCurrentUser","token","localStorage","getItem","useEffect","fetch","headers","then","res","json","u","p","JSON","stringify","removeItem","map","o","borderBottom","padding","id","title","vendor","discount","numavailable"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction HomePage() {\n    const [offers, setOffers] = React.useState([]);\n    const [loading, setLoading] = React.useState([]);\n    const [currentUser, setCurrentUser] = React.useState(null);\n\n    const token = localStorage.getItem(\"token\");\n\n    React.useEffect(() => {\n        if (token) {\n            fetch(\"http://localhost:5000/get-current-user\", {\n                headers: {\"Authorization\": `Bearer ${token}`}\n            })\n            .then(res => res.json())\n            .then(u => { setCurrentUser(u) });\n        }\n    }, [token]);\n\n    React.useEffect(() => {\n        setLoading(true);\n        fetch(\"http://localhost:5000/\")\n        .then(res => res.json())\n        .then(p => {\n            setOffers(p);\n            setLoading(false);\n        });\n    }, []);\n\n    return (\n        <div>\n        <h1>NANOVERT</h1>\n        <p>Token: {token}</p>\n        <p>Current user: {JSON.stringify(currentUser['username'])}</p>\n        <p><Link to={`/login`}>Login</Link></p>\n        <p><Link to={`/signup`}>Sign Up</Link></p>\n        <p>\n            <button onClick={() => localStorage.removeItem(\"token\")}>\n                Log out.\n            </button>\n        </p>\n\n        {loading && \"loading....\"}\n        {offers.map(o => {\n            return (\n            <div style={{ borderBottom: \"1px solid lightgrey\", padding: 40 }}>\n                <Link to={`/offer/${o.id}`}>{o.title}</Link>\n                <br />\n                <small>\n                <p>{o.vendor}</p>\n                <p>Discount: {o.discount}%</p>\n                <p>Remaining: {o.numavailable}</p>\n                </small>\n            </div>\n            );\n        })}\n        </div>\n    );\n}\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}