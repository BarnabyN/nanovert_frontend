{"ast":null,"code":"import _slicedToArray from\"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import MaterialTable from'material-table';import{Fab}from'@material-ui/core';import{useHistory,Link}from\"react-router-dom\";import{Search,FirstPage,LastPage,Clear,ChevronLeft,ChevronRight}from\"@material-ui/icons\";import{TableSortLabel}from\"@material-ui/core/\";import RedeemIcon from\"@material-ui/icons/Redeem\";import{Collapse,Navbar,NavbarToggler,NavbarBrand,Nav,NavItem,NavLink}from'reactstrap';function createJson(username,firstname,lastname,email){return{\"username\":username,\"firstname\":firstname,\"lastname\":lastname,\"email\":email};}function VendorHomePage(){var token=localStorage.getItem(\"token\");var history=useHistory();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),currentVendor=_React$useState2[0],setCurrentVendor=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),users=_React$useState4[0],setUsers=_React$useState4[1];var _React$useState5=React.useState(true),_React$useState6=_slicedToArray(_React$useState5,2),collapsed=_React$useState6[0],setCollapsed=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),errorMessage=_React$useState8[0],setErrorMessage=_React$useState8[1];var toggleNavbar=function toggleNavbar(){return setCollapsed(!collapsed);};React.useEffect(function(){if(token){fetch(\"http://localhost:5000/vendor-home\",{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){return res.json();}).then(function(u){setUsers(u);});}else{history.push(\"/vendor-login\");}},[token]);React.useEffect(function(){if(token){fetch(\"http://localhost:5000/get-current-vendor\",{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){return res.json();}).then(function(u){setCurrentVendor(u['username']);});}},[token]);function handleClaim(username,vendorname,datetime){fetch(\"http://localhost:5000/log-claim\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,vendorname:vendorname,datetime:datetime})}).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success===false){setErrorMessage(res.message);}else{setErrorMessage(\"\");alert(\"Success! \"+username+\" claimed from \"+vendorname);}});}return React.createElement(\"div\",{style:{textAlign:\"center\",backgroundColor:\"black\",color:\"white\",paddingBottom:\"60%\"}},React.createElement(Navbar,{dark:true,sticky:\"top\",style:{backgroundColor:\"black\"}},React.createElement(NavbarBrand,{tag:Link,to:\"/\",className:\"mr-auto\",style:{fontSize:\"30px\"}},\"nanovert\"),React.createElement(\"div\",{style:{marginRight:\"20px\"}},currentVendor),React.createElement(NavbarToggler,{onClick:toggleNavbar,className:\"mr-2\"}),React.createElement(Collapse,{isOpen:!collapsed,navbar:true},React.createElement(Nav,{navbar:true},React.createElement(NavItem,null,React.createElement(NavLink,{tag:Link,onClick:function onClick(){localStorage.removeItem(\"token\");history.push(\"/vendor-login\");}},\"Logout\"))))),React.createElement(MaterialTable,{style:{margin:\"5%\",backgroundColor:\"white\"},title:\"Verified Users\",options:{defaultExpanded:true,paging:false},icons:{Search:Search,FirstPage:FirstPage,LastPage:LastPage,PreviousPage:ChevronLeft,NextPage:ChevronRight,SortArrow:TableSortLabel,ResetSearch:Clear},columns:[{title:'Username',field:'username'},{title:'First Name',field:'firstname'},{title:'Last Name',field:'lastname'},{title:'Email',field:'email'}],data:users.map(function(u){return createJson(u.username,u.firstname,u.lastname,u.email);}),actions:[{icon:'save',tooltip:'Save User',onClick:function onClick(event,rowData){var d=new Date();handleClaim(rowData.username,currentVendor,d);}}],components:{Action:function Action(props){return React.createElement(Fab,{onClick:function onClick(event){return props.action.onClick(event,props.data);},color:\"primary\",variant:\"contained\",style:{textTransform:'none'},size:\"medium\",disableElevation:\"true\"},React.createElement(RedeemIcon,null));}}}));}export default VendorHomePage;","map":{"version":3,"sources":["/Users/barnabynapier/Documents/nanovert/frontend/src/pages/VendorHomePage.js"],"names":["React","MaterialTable","Fab","useHistory","Link","Search","FirstPage","LastPage","Clear","ChevronLeft","ChevronRight","TableSortLabel","RedeemIcon","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","createJson","username","firstname","lastname","email","VendorHomePage","token","localStorage","getItem","history","useState","currentVendor","setCurrentVendor","users","setUsers","collapsed","setCollapsed","errorMessage","setErrorMessage","toggleNavbar","useEffect","fetch","headers","then","res","json","u","push","handleClaim","vendorname","datetime","method","body","JSON","stringify","console","log","success","message","alert","textAlign","backgroundColor","color","paddingBottom","fontSize","marginRight","removeItem","margin","defaultExpanded","paging","PreviousPage","NextPage","SortArrow","ResetSearch","title","field","map","icon","tooltip","onClick","event","rowData","d","Date","Action","props","action","data","textTransform"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport MaterialTable from 'material-table';\nimport { Fab } from '@material-ui/core'\nimport { useHistory, Link } from \"react-router-dom\";\nimport { Search, FirstPage, LastPage, Clear, ChevronLeft, ChevronRight } from \"@material-ui/icons\"\nimport { TableSortLabel } from \"@material-ui/core/\"\nimport RedeemIcon from \"@material-ui/icons/Redeem\"\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink } from 'reactstrap'\n\n\nfunction createJson(username, firstname, lastname, email) {\n    return {\n        \"username\":username,\n        \"firstname\":firstname,\n        \"lastname\":lastname,\n        \"email\":email,\n\n    }\n}\n\nfunction VendorHomePage() {\n    const token = localStorage.getItem(\"token\");\n    const history = useHistory();\n    const [currentVendor, setCurrentVendor] = React.useState(null);\n    const [users, setUsers] = React.useState([]);\n    const [collapsed, setCollapsed] = React.useState(true);\n    const [errorMessage, setErrorMessage] = React.useState(\"\")\n    const toggleNavbar = () => setCollapsed(!collapsed);\n\n\n    React.useEffect(() => {\n        if (token) {\n            fetch(\"http://localhost:5000/vendor-home\", {\n                headers: {\"Authorization\": `Bearer ${token}`}\n            })\n                .then(res => res.json())\n                .then(u => { setUsers(u)});\n        } else {\n            history.push(\"/vendor-login\")\n        }\n\n    }, [token]);\n\n    React.useEffect(() => {\n        if (token) {\n            fetch(\"http://localhost:5000/get-current-vendor\", {\n                headers: {\"Authorization\": `Bearer ${token}`}\n            })\n            .then(res => res.json())\n            .then(u => { setCurrentVendor(u['username']) });\n        }\n    }, [token]);\n    \n    function handleClaim(username, vendorname, datetime) {\n        fetch(\"http://localhost:5000/log-claim\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                username,\n                vendorname,\n                datetime\n            })\n        })\n        .then(res => res.json())\n        .then(res => {\n            console.log(res);\n\n            if (res.success === false) {\n                setErrorMessage(res.message);\n            } \n            else {\n                setErrorMessage(\"\");\n                alert(\"Success! \" + username + \" claimed from \" + vendorname)\n            }\n        });\n    }\n\n    return (\n        <div style={{textAlign:\"center\", backgroundColor:\"black\", color:\"white\", paddingBottom:\"60%\"}}>\n            <Navbar dark sticky=\"top\" style={{backgroundColor:\"black\"}}>\n                <NavbarBrand tag={Link} to={\"/\"} className=\"mr-auto\" style={{fontSize:\"30px\"}}>nanovert</NavbarBrand>\n                <div style={{marginRight:\"20px\"}}>{currentVendor}</div>\n                <NavbarToggler onClick={toggleNavbar} className=\"mr-2\" />\n                <Collapse isOpen={!collapsed} navbar>\n                    <Nav navbar>\n                        <NavItem>\n                            <NavLink tag={Link} onClick={() => {\n                                localStorage.removeItem(\"token\")\n                                history.push(\"/vendor-login\")}}>\n                                    Logout\n                            </NavLink>\n                        </NavItem>\n                    </Nav>\n                </Collapse>\n            </Navbar>\n\n\n            <MaterialTable\n                style={{margin:\"5%\", backgroundColor:\"white\"}}\n                title=\"Verified Users\"\n                options={{\n                        defaultExpanded:true,\n                        paging:false\n                    }}\n                icons={{\n                    Search: Search,\n                    FirstPage: FirstPage,\n                    LastPage: LastPage,\n                    PreviousPage: ChevronLeft,\n                    NextPage: ChevronRight,\n                    SortArrow: TableSortLabel,\n                    ResetSearch:Clear\n                }}\n                columns={[\n                    { title: 'Username', field: 'username' },\n                    { title: 'First Name', field: 'firstname' },\n                    { title: 'Last Name', field: 'lastname' },\n                    { title: 'Email', field: 'email' }\n                ]}\n                data={users.map(u => createJson(u.username, u.firstname, u.lastname, u.email))}\n                actions={[\n                    {\n                      icon: 'save',\n                      tooltip: 'Save User',\n                      onClick: (event, rowData) => {\n                          var d = new Date();\n                          handleClaim(rowData.username, currentVendor, d)\n                      }\n                    }\n                  ]}\n                  components={{\n                    Action: props => (\n                      <Fab\n                        onClick={(event) => props.action.onClick(event, props.data)}\n                        color=\"primary\"\n                        variant=\"contained\"\n                        style={{textTransform: 'none'}}\n                        size=\"medium\"\n                        disableElevation=\"true\"\n                      >\n                        <RedeemIcon />\n                      </Fab>\n                    ),\n                  }}\n                />\n\n        </div>\n    );\n}\n\nexport default VendorHomePage;"]},"metadata":{},"sourceType":"module"}