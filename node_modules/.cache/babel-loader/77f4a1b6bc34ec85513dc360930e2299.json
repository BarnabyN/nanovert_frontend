{"ast":null,"code":"import _slicedToArray from \"/Users/barnabynapier/Documents/nanovert/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/barnabynapier/Documents/nanovert/frontend/src/pages/HomePage.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction HomePage() {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        posts = _React$useState2[0],\n        setPosts = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        loading = _React$useState4[0],\n        setLoading = _React$useState4[1];\n\n  const _React$useState5 = React.useState(null),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        currentUser = _React$useState6[0],\n        setCurrentUser = _React$useState6[1];\n\n  const token = localStorage.getItem(\"token\");\n  React.useEffect(() => {\n    if (token) {\n      fetch(\"http://localhost:5000/get-me\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(u => {\n        setCurrentUser(u);\n      });\n    }\n  }, [token]);\n  React.useEffect(() => {\n    setLoading(true);\n    fetch(\"http://localhost:5000/\").then(res => res.json()).then(p => {\n      setPosts(p);\n      setLoading(false);\n    });\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Nanovert\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Token: \", token), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Current user: \", JSON.stringify(currentUser)), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/login`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Login\")), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: () => localStorage.removeItem(\"token\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Log out.\")), loading && \"loading....\", posts.map(p => {\n    return React.createElement(\"div\", {\n      style: {\n        borderBottom: \"1px solid lightgrey\",\n        padding: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `/post/${p.id}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, p.title), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, p.author, \" \\xB7 \", p.points, \" points\"));\n  }));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/barnabynapier/Documents/nanovert/frontend/src/pages/HomePage.js"],"names":["React","Link","HomePage","useState","posts","setPosts","loading","setLoading","currentUser","setCurrentUser","token","localStorage","getItem","useEffect","fetch","headers","Authorization","then","res","json","u","p","JSON","stringify","removeItem","map","borderBottom","padding","id","title","author","points"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,SAASC,QAAT,GAAoB;AAAA,0BACQF,KAAK,CAACG,QAAN,CAAe,EAAf,CADR;AAAA;AAAA,QACXC,KADW;AAAA,QACJC,QADI;;AAAA,2BAEYL,KAAK,CAACG,QAAN,CAAe,EAAf,CAFZ;AAAA;AAAA,QAEXG,OAFW;AAAA,QAEFC,UAFE;;AAAA,2BAGoBP,KAAK,CAACG,QAAN,CAAe,IAAf,CAHpB;AAAA;AAAA,QAGXK,WAHW;AAAA,QAGEC,cAHF;;AAKlB,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEAZ,EAAAA,KAAK,CAACa,SAAN,CAAgB,MAAM;AACpB,QAAIH,KAAJ,EAAW;AACTI,MAAAA,KAAK,CAAC,8BAAD,EAAiC;AACpCC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASN,KAAM;AADxB;AAD2B,OAAjC,CAAL,CAKGO,IALH,CAKQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALf,EAMGF,IANH,CAMQG,CAAC,IAAI;AACTX,QAAAA,cAAc,CAACW,CAAD,CAAd;AACD,OARH;AASD;AACF,GAZD,EAYG,CAACV,KAAD,CAZH;AAcAV,EAAAA,KAAK,CAACa,SAAN,CAAgB,MAAM;AACpBN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAO,IAAAA,KAAK,CAAC,wBAAD,CAAL,CACGG,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQI,CAAC,IAAI;AACThB,MAAAA,QAAQ,CAACgB,CAAD,CAAR;AACAd,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KALH;AAMD,GARD,EAQG,EARH;AAUA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAWG,KAAX,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAkBY,IAAI,CAACC,SAAL,CAAef,WAAf,CAAlB,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAG,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAG,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAH,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,OAAO,EAAE,MAAMG,YAAY,CAACa,UAAb,CAAwB,OAAxB,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CALF,EAWGlB,OAAO,IAAI,aAXd,EAYGF,KAAK,CAACqB,GAAN,CAAUJ,CAAC,IAAI;AACd,WACE;AAAK,MAAA,KAAK,EAAE;AAAEK,QAAAA,YAAY,EAAE,qBAAhB;AAAuCC,QAAAA,OAAO,EAAE;AAAhD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,SAAQN,CAAC,CAACO,EAAG,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4BP,CAAC,CAACQ,KAA9B,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGR,CAAC,CAACS,MADL,YACuBT,CAAC,CAACU,MADzB,YAHF,CADF;AASD,GAVA,CAZH,CADF;AA0BD;;AAED,eAAe7B,QAAf","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction HomePage() {\n  const [posts, setPosts] = React.useState([]);\n  const [loading, setLoading] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useState(null);\n\n  const token = localStorage.getItem(\"token\");\n\n  React.useEffect(() => {\n    if (token) {\n      fetch(\"http://localhost:5000/get-me\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(res => res.json())\n        .then(u => {\n          setCurrentUser(u);\n        });\n    }\n  }, [token]);\n\n  React.useEffect(() => {\n    setLoading(true);\n    fetch(\"http://localhost:5000/\")\n      .then(res => res.json())\n      .then(p => {\n        setPosts(p);\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <div>\n      <h1>Nanovert</h1>\n      <p>Token: {token}</p>\n      <p>Current user: {JSON.stringify(currentUser)}</p>\n      <p><Link to={`/login`}>Login</Link></p>\n      <p>\n        <button onClick={() => localStorage.removeItem(\"token\")}>\n          Log out.\n        </button>\n      </p>\n\n      {loading && \"loading....\"}\n      {posts.map(p => {\n        return (\n          <div style={{ borderBottom: \"1px solid lightgrey\", padding: 40 }}>\n            <Link to={`/post/${p.id}`}>{p.title}</Link>\n            <br />\n            <small>\n              {p.author} &middot; {p.points} points\n            </small>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}